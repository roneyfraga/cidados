{"title":"OJS downloader","markdown":{"headingText":"OJS downloader","containsRefs":false,"markdown":"\n\n```{r filename='utils.R'}\n#| eval: false \n#| echo: true\n#| code-fold: hide\n\ngetIssues <- function(url) {\n\n    print(url)\n\n    read_html(url) %>>% \n        html_nodes(xpath = '//*[@id=\"issues\"]') %>>%\n        html_nodes('a') %>>% \n        html_attr(\"href\") %>>% \n        (unique(.)) %>>% \n        (. -> page1)\n\n    pages <- c(url, page1[grepl('Page', page1)])\n\n    as.list(pages)\n\n    resultado <- list()\n\n    for(i in seq_along(pages)) {\n\n        read_html(pages[[i]]) %>>% \n            html_nodes(xpath = '//*[@id=\"issues\"]') %>>%\n            html_nodes('a') %>>% \n            html_attr(\"href\") %>>% \n            (unique(.)) %>>% \n            (. -> issues)\n\n        resultado[[i]] <- issues[!grepl('Page', issues)]\n\n    }\n\n    return(paste0(unlist(resultado), '/showToc'))\n\n}\n\n\ngetSummaries <- function(url) {\n\n    print(url)\n\n    read_html(url) %>>% \n        html_nodes('.tocArticle')  %>>% \n        html_nodes('.tocTitle')  %>>% \n        html_nodes('a') %>>% \n        html_attr('href') \n}\n\ngetPapersInfo <- function(url) {\n\n    print(url)\n\n    artigo <- read_html(url)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"articleTitle\"]') %>>%\n        html_text %>>% \n        (. -> articleTitle)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"authorString\"]') %>>%\n        html_text %>>% \n        (. -> authorString)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"articleAbstract\"]') %>>%\n        html_text %>>% \n        (. -> articleAbstract)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"articleSubject\"]') %>>%\n        html_text %>>% \n        (. -> articleSubject)\n    articleSubject <- ifelse(length(articleSubject) == 0, 'No Keywords', articleSubject)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"pub-id::doi\"]') %>>%\n        html_text %>>% \n        (. -> doi)\n    doi <- ifelse(length(doi) == 0, 'No DOI', doi)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"breadcrumb\"]') %>>%\n        html_text %>>%   \n        (. -> issue)\n\n    data.frame(articleTitle, \n               authorString, \n               articleAbstract, \n               articleSubject, \n               doi,\n               issue) %>>% \n    tbl_df\n\n}\n```\n\n\n```{r filename='wos-downloader.R'}\n#| eval: false \n#| echo: true\n#| code-fold: hide\n\nlibrary(rio)\nlibrary(pipeR)\nlibrary(tidyverse)\nlibrary(httr)\nlibrary(xml2)\nlibrary(rvest)\n\nsource('utils.R')\n\n# ------------------------------------------------------------\n# Análise Econômica\n\nurl = 'https://seer.ufrgs.br/AnaliseEconomica/issue/archive'\n\n# ------------------------------\n# getIssues\nissues <- getIssues(url)\n\n# ------------------------------\n# getSummary\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\n\n# ------------------------------\n# getPapersInfo\npapers <- lapply(summaries[1:5],getPapersInfo) \n\npapers %>>% \n    bind_rows() %>>% \n    glimpse\n    (export(.,\"AnaliseEconomica.rds\"))\n\n\n# ------------------------------------------------------------\n# Brazilian Review of Econometrics\n\nurl = 'http://bibliotecadigital.fgv.br/ojs/index.php/bre/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"BrazilianReviewEconometrics.rds\"))\n\ngetPapersInfo(summaries[[1]]) %>>% glimpse()\n\n# ------------------------------------------------------------\n# Revista de Economia Contemporânea\nurl = 'https://revistas.ufrj.br/index.php/rec/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"RevistaEconomiaContemporanea.rds\"))\n\n\n# ------------------------------------------------------------\n# Brazilian Review of Finance\n\nurl = 'http://bibliotecadigital.fgv.br/ojs/index.php/rbfin/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"BrazilianReviewFinance.rds\"))\n\n\n# ------------------------------------------------------------\n# Economia e Sociedade\n\n# TODO\n\nurl = 'https://periodicos.sbu.unicamp.br/ojs/index.php/ecos/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"EconomiaSociedade.rds\"))\n\n\n# ------------------------------------------------------------\n# Estudos Economicos\n\n# TODO\n\nurl = 'http://www.revistas.usp.br/ee/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"EstudosEconomicos.rds\")\n\n\n# ------------------------------------------------------------\n# Nova Economia\n\n# TODO\n\nurl = 'https://revistas.face.ufmg.br/index.php/novaeconomia/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"NovaEconomia.rds\")\n\n\n# ------------------------------------------------------------\n# Pesquisa e Planejamento Econômico\n\n# TODO\n\nurl = 'http://ppe.ipea.gov.br/index.php/ppe/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"PesquisaPlanejamentoEconomico.rds\")\n```\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"projeto-ojs-downloader.html"},"language":{},"metadata":{"lang":"pt","fig-responsive":true,"quarto-version":"1.2.237","bibliography":["references.bib"],"csl":"abnt-ipea.csl","theme":{"light":"flatly","dark":"darkly"},"toc-location":"right","author-meta":"Roney Fraga Souza"},"extensions":{"book":{"multiFile":true}}}}}