{"title":"Dicionário de sinônimos","markdown":{"headingText":"Dicionário de sinônimos","containsRefs":false,"markdown":"\n\n```{r filename='dicsyn.R'}\n#| eval: false\n#| echo: true\n\n#!/usr/bin/env Rscript\n\n# do\n# chmod +x dicsyn.R\n# run\n# ./dicsyn.R idioma termo\n\n# or add to ~/.zshrc an alias to dicsyn.R\n\nsuppressMessages(library(rvest))\nsuppressMessages(library(stringr))\nsuppressMessages(library(pipeR))\n\nurl <- 'https://sinonimos.woxikon.com.br'\n\n# receber o comando do terminal\nargs <- commandArgs(TRUE)\n\n# test if there is at least one argument: if not, return an error\nif (length(args) < 2) {\n\n    stop(\"Please specify valid language (pt, en, fr, it, ...) and a search term..\\n\", call. = FALSE)\n\n} else if (!(args[1] %in% c('pt', 'en', 'be', 'cl', 'co', 'br', 'nz', 'uk', 'fr', 'it', 'sv'))) {\n\n    stop(\"Specify a valid language.\n            Portuguese: 'pt'\n            English: 'en'\n            French: 'fr',\n            Italian: 'it'\n            etc.\\n\", call. = FALSE)\n\n} else {\n\n    page = read_html(paste(url, args[1], args[2], sep = '/'))\n    \n    # primeiro sinônimo\n    html_nodes(page, xpath = '//*[@id=\"content\"]/div[3]/div/div/div[2]/div/div[3]/ol/li/div') %>>% \n        html_text() %>>% \n        (gsub('^.*:|\\\\n', '', .)) %>>% \n        (trimws(., which = 'both', whitespace = \"[ \\t\\r\\n]\"))  %>>% \n        (strsplit(., split = \" +\")) %>>% \n        (. -> a)\n    \n    # todos, exceto o primeiro sinônimo\n    html_nodes(page, xpath = '//*[@id=\"content\"]/ol/li[*]') %>>% \n        html_text() %>>% \n        (gsub('^.*:|\\\\n', '', .)) %>>% \n        (trimws(., which = 'both', whitespace = \"[ \\t\\r\\n]\"))  %>>% \n        (strsplit(., split = \" +\")) %>>% \n        (. -> b)\n    \n    termos <- append(a, b)\n    \n    b <- lapply(termos, function(x) { \n                    paste(x[1], str_c(x[2:length(x)], collapse = \", \"), sep = ': ')\n    }) \n    \n    names(b) <- NULL\n    unlist(b)\n}\n```\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","output-file":"projeto-dicionario-sinonimos.html"},"language":{},"metadata":{"lang":"pt","fig-responsive":true,"quarto-version":"1.2.237","bibliography":["references.bib"],"csl":"abnt-ipea.csl","theme":{"light":"flatly","dark":"darkly"},"toc-location":"right","author-meta":"Roney Fraga Souza"},"extensions":{"book":{"multiFile":true}}}}}