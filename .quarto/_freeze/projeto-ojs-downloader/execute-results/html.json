{
  "hash": "df1f076efdc520f760219c3642373379",
  "result": {
    "markdown": "\n# OJS downloader\n\n\n::: {.cell filename='utils.R'}\n\n```{.r .cell-code  code-fold=\"hide\"}\ngetIssues <- function(url) {\n\n    print(url)\n\n    read_html(url) %>>% \n        html_nodes(xpath = '//*[@id=\"issues\"]') %>>%\n        html_nodes('a') %>>% \n        html_attr(\"href\") %>>% \n        (unique(.)) %>>% \n        (. -> page1)\n\n    pages <- c(url, page1[grepl('Page', page1)])\n\n    as.list(pages)\n\n    resultado <- list()\n\n    for(i in seq_along(pages)) {\n\n        read_html(pages[[i]]) %>>% \n            html_nodes(xpath = '//*[@id=\"issues\"]') %>>%\n            html_nodes('a') %>>% \n            html_attr(\"href\") %>>% \n            (unique(.)) %>>% \n            (. -> issues)\n\n        resultado[[i]] <- issues[!grepl('Page', issues)]\n\n    }\n\n    return(paste0(unlist(resultado), '/showToc'))\n\n}\n\n\ngetSummaries <- function(url) {\n\n    print(url)\n\n    read_html(url) %>>% \n        html_nodes('.tocArticle')  %>>% \n        html_nodes('.tocTitle')  %>>% \n        html_nodes('a') %>>% \n        html_attr('href') \n}\n\ngetPapersInfo <- function(url) {\n\n    print(url)\n\n    artigo <- read_html(url)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"articleTitle\"]') %>>%\n        html_text %>>% \n        (. -> articleTitle)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"authorString\"]') %>>%\n        html_text %>>% \n        (. -> authorString)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"articleAbstract\"]') %>>%\n        html_text %>>% \n        (. -> articleAbstract)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"articleSubject\"]') %>>%\n        html_text %>>% \n        (. -> articleSubject)\n    articleSubject <- ifelse(length(articleSubject) == 0, 'No Keywords', articleSubject)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"pub-id::doi\"]') %>>%\n        html_text %>>% \n        (. -> doi)\n    doi <- ifelse(length(doi) == 0, 'No DOI', doi)\n\n    artigo %>>% \n        html_nodes(xpath = '//*[@id=\"breadcrumb\"]') %>>%\n        html_text %>>%   \n        (. -> issue)\n\n    data.frame(articleTitle, \n               authorString, \n               articleAbstract, \n               articleSubject, \n               doi,\n               issue) %>>% \n    tbl_df\n\n}\n```\n:::\n\n::: {.cell filename='wos-downloader.R'}\n\n```{.r .cell-code  code-fold=\"hide\"}\nlibrary(rio)\nlibrary(pipeR)\nlibrary(tidyverse)\nlibrary(httr)\nlibrary(xml2)\nlibrary(rvest)\n\nsource('utils.R')\n\n# ------------------------------------------------------------\n# Análise Econômica\n\nurl = 'https://seer.ufrgs.br/AnaliseEconomica/issue/archive'\n\n# ------------------------------\n# getIssues\nissues <- getIssues(url)\n\n# ------------------------------\n# getSummary\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\n\n# ------------------------------\n# getPapersInfo\npapers <- lapply(summaries[1:5],getPapersInfo) \n\npapers %>>% \n    bind_rows() %>>% \n    glimpse\n    (export(.,\"AnaliseEconomica.rds\"))\n\n\n# ------------------------------------------------------------\n# Brazilian Review of Econometrics\n\nurl = 'http://bibliotecadigital.fgv.br/ojs/index.php/bre/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"BrazilianReviewEconometrics.rds\"))\n\ngetPapersInfo(summaries[[1]]) %>>% glimpse()\n\n# ------------------------------------------------------------\n# Revista de Economia Contemporânea\nurl = 'https://revistas.ufrj.br/index.php/rec/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"RevistaEconomiaContemporanea.rds\"))\n\n\n# ------------------------------------------------------------\n# Brazilian Review of Finance\n\nurl = 'http://bibliotecadigital.fgv.br/ojs/index.php/rbfin/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"BrazilianReviewFinance.rds\"))\n\n\n# ------------------------------------------------------------\n# Economia e Sociedade\n\n# TODO\n\nurl = 'https://periodicos.sbu.unicamp.br/ojs/index.php/ecos/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"EconomiaSociedade.rds\"))\n\n\n# ------------------------------------------------------------\n# Estudos Economicos\n\n# TODO\n\nurl = 'http://www.revistas.usp.br/ee/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"EstudosEconomicos.rds\")\n\n\n# ------------------------------------------------------------\n# Nova Economia\n\n# TODO\n\nurl = 'https://revistas.face.ufmg.br/index.php/novaeconomia/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"NovaEconomia.rds\")\n\n\n# ------------------------------------------------------------\n# Pesquisa e Planejamento Econômico\n\n# TODO\n\nurl = 'http://ppe.ipea.gov.br/index.php/ppe/issue/archive'\nissues <- getIssues(url)\nsummaries <- lapply(issues,getSummaries)\nsummaries <- unlist(summaries)\npapers <- lapply(summaries,getPapersInfo) \npapers %>>% \n    bind_rows() %>>% \n    (export(.,\"PesquisaPlanejamentoEconomico.rds\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}